<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />

    <script language="javascript" type="text/javascript" src="{{MEDIA_URL}}formplayer/script/layout.js?version={{app_version}}"></script>   
    <script language="javascript" type="text/javascript" src="{{MEDIA_URL}}formplayer/script/touchscreen-ui.js?version={{app_version}}"></script>   
    <script language="javascript" type="text/javascript" src="{{MEDIA_URL}}formplayer/script/formnav.js?version={{app_version}}"></script>
    <script language="javascript" type="text/javascript" src="{{MEDIA_URL}}formplayer/script/dates.js?version={{app_version}}"></script>
    <script language="javascript" type="text/javascript" src="{{MEDIA_URL}}formplayer/script/entrycontrols_type.js?version={{app_version}}"></script>
    <script language="javascript" type="text/javascript;version=1.7" src="{{MEDIA_URL}}formplayer/script/workflow.js?version={{app_version}}"></script>
   
    <script language="javascript" type="text/javascript" src="{{MEDIA_URL}}formplayer/script/jquery-1.4.2.min.js"></script>
    <script language="javascript" type="text/javascript" src="{{MEDIA_URL}}formplayer/script/shortcut.js"></script>

{% for script in dynamic_scripts %}
    <script language="javascript" type="text/javascript;version=1.7" src="{{MEDIA_URL}}{{script}}?version={{app_version}}"></script>   
{% endfor %}

    <script language="javascript">

if (!window.console) {
  window.console = {
    log: function () { }
  };
}

XFORM_URL = "{% url xform_player_proxy %}";
PRELOADER_URL = "{% url xform_preloader %}";
AUTOCOMPLETE_URL = "{% url touchforms_autocomplete %}";
FORCE_ABORT_URL = "{% url touchforms_force_abort %}";

XFORM_NAME = "{{form.name}}";
XFORM_UID = null;

PREFIXES = {};

{% block custom_init %}{% endblock %}

function init () {

touchscreenUI = {
  showWaiting: function (active) {

  }
}

//  setup({% if fullscreen %}true{% endif %});
//  initStaticWidgets();
//  render_clean();
  
{% ifequal mode 'xform' %}

  XFORM_UID = $('#form-uid')[0].value;
  gFormAdapter = new xformAjaxAdapter(XFORM_UID, {{ preloader_data|safe }});
  
{% else %}

  gFormAdapter = new workflowAdapter(new {{ form.wfobj }}({{ form.wfargs|default:""|safe }}));

{% endifequal %}

  gFormAdapter.loadForm();
}

    </script>
    
  </head>

  <body id="body" onLoad="init();" style="font-family: sans-serif; ">

    <div id="question" style="background: #fcc;">asdf</div>
    <div id="answer" style="background: #cfc;">qwer</div>

    <button id="back" onclick="backClicked();">back</button>
    <button id="help" onclick="helpClicked();">help</button>
    <button id="next" onclick="nextClicked();">next</button>

    <!-- stick form uid here to aid with backslash escaping -->
    <input id="form-uid" type="hidden" value="{% ifequal mode 'xform' %}{{form.file.path}}{% endifequal %}">

  </body>
</html>

